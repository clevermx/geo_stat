"0","library(rhdf5)"
"0","#получает  data.table (gsm,gse,gpl) из всех h5 файлов в папке path_to_folder"
"0","h5_files_to_DT= function(path_to_folder){"
"0","  DT_h5=data.table()"
"0","  h5_files=list.files(file.path(path_to_folder), '\\.h5$', full.names = TRUE)"
"0","  for (destfile in h5_files) {"
"0","      arch_part= data.table(gsm=h5read(destfile,""/meta/Sample_geo_accession""),"
"0","                            gse=strsplit(x = h5read(destfile,""/meta/Sample_series_id""),split = ""Xx-xX""), "
"0","                            gpl =h5read(destfile,""/meta/Sample_platform_id""))"
"0","      DT_h5=rbindlist(l=list(DT_h5,arch_part))"
"0","  }"
"0","  DT_h5[,len:=sapply(gse, length)]"
"0","  DT_h5=DT_h5[,.(gsm=rep(gsm,len),gse=unlist(gse),gpl=rep(gpl,len))]"
"0","  return(DT_h5)"
"0","}"
"0","DT_arch7= h5_files_to_DT(path_to_folder = ""D://datasets/ARCHS4_v7/"")"
"0","DT_arch8 = h5_files_to_DT(path_to_folder = ""D://datasets/ARCHS4_v8/"")"
"0","head(DT_arch7)"
